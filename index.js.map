{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-fuctions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst key = '46059319-29801eb93901e255329030081';\nexport default async function imageFetch(\n    searchResult,\n    page = 1,\n    per_page = 15\n) {\n    try {\n        const responce = await axios.get(`https://pixabay.com/api/?key=${key}&q=${searchResult}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${per_page}`\n        );\n        return responce.data;\n    }\n    catch (error) {\n        console.log(error);\n    }\n}","export default function renderImages(images) {\n  return images.hits\n    .map(image => {\n      const {\n        webformatURL,\n        largeImageURL,\n        tags,\n        views,\n        downloads,\n        likes,\n        comments,\n      } = image;\n      return `\n          <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n              <img \n                class=\"gallery-image\" \n                src=\"${webformatURL}\"\n                alt=\"${tags}\"\n              />\n            </a>\n            <div class=\"overlay\">\n            <div class=\"info\">\n                <div class=\"overlay-item\">Likes<br>${likes}</div>\n                <div class=\"overlay-item\">Views<br>${views}</div>\n                <div class=\"overlay-item\">Comments<br>${comments}</div>\n                <div class=\"overlay-item\">Downloads<br>${downloads}</div>\n                </div>\n            </div>\n          </li>`;\n    })\n    .join('');\n}","import  imageFetch from \"./js/pixabay-api\";\nimport  renderImages from \"./js/render-fuctions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst loader = document.querySelector('.loader');\nconst submitForm = document.querySelector('.form');\nconst loadMore = document.querySelector('.load-more');\nconst gallery = document.querySelector('.image-gallery');\n\nsubmitForm.addEventListener('submit', handleSubmit);\nloadMore.addEventListener('click', handleLoadMore);\n\nlet page;\nconst per_page = 15;\nlet totalItems;\nlet totalPages;\nlet searchResult = '';\n\n\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    page = 1 ;\n  gallery.innerHTML = '';\n  const form = event.target;\n  searchResult = form.elements.picture.value.trim();\n    loader.style.display = 'inline-block';\n    \n    try {\n        const response = await imageFetch(searchResult);\n        totalItems = response.totalHits;\n        totalPages = totalItems / per_page;\n        loader.style.display = 'none';\n \n        if (response.hits.length > 0) {\n            gallery.insertAdjacentHTML('beforeend', renderImages(response));\n            if (totalPages <= page) {\n                loadMore.style.display = 'none';\n                iziToast.show({\n                    message: `Sorry, there are no more images to load!`,\n                    position: 'topRight',\n                    backgroundColor: '#2596be',\n                    messageColor: '#fff',\n                });\n            }\n            else {\n                loadMore.style.display = 'block';\n                lightbox.refresh();\n            }\n        } else {\n            loadMore.style.display = 'none';\n            iziToast.show({\n                message: `❌ Sorry, there are no images matching your search query.`,\n                position: 'topRight',\n                backgroundColor: '#F44336',\n                messageColor: '#fff',\n            });\n        }\n    }catch (error) {\n      loader.style.display = 'none';\n      iziToast.show({\n        message: `${error.message}`,\n        position: 'topRight',\n        backgroundColor: '#F44336',\n        messageColor: '#fff',\n      });\n    }\n}\n\nasync function handleLoadMore() {\n  try {\n    page++;\n    const picture = gallery.lastElementChild.getBoundingClientRect();\n    loader.style.display = 'inline-block';\n    const response = await imageFetch(searchResult, page);\n    loader.style.display = 'none';\n    gallery.insertAdjacentHTML('beforeend', renderImages(response));\n    lightbox.refresh();\n    window.scrollBy({\n      top: picture.bottom,\n      behavior: 'smooth',\n    });\n\n    if (totalPages <= page) {\n      loadMore.style.display = 'none';\n      iziToast.show({\n        message: `Sorry, there are no more images to load!`,\n        position: 'topRight',\n        backgroundColor: '#2596be',\n        messageColor: '#fff',\n      });\n    }\n  } catch (error) {\n    iziToast.show({\n      message: `${error.message}`,\n      position: 'topRight',\n      backgroundColor: '#2596be',\n      messageColor: '#fff',\n    });\n  }\n}"],"names":["key","imageFetch","searchResult","page","per_page","axios","error","renderImages","images","image","webformatURL","largeImageURL","tags","views","downloads","likes","comments","lightbox","SimpleLightbox","loader","submitForm","loadMore","gallery","handleSubmit","handleLoadMore","totalItems","totalPages","event","response","iziToast","picture"],"mappings":"owBACA,MAAMA,EAAM,qCACG,eAAeC,EAC1BC,EACAC,EAAO,EACPC,EAAW,GACb,CACE,GAAI,CAGA,OAFiB,MAAMC,EAAM,IAAI,gCAAgCL,CAAG,MAAME,CAAY,iEAAiEC,CAAI,aAAaC,CAAQ,EACxL,GACwB,IACnB,OACME,EAAO,CACV,QAAQ,IAAIA,CAAK,CACpB,CACL,CCfe,SAASC,EAAaC,EAAQ,CAC3C,OAAOA,EAAO,KACX,IAAIC,GAAS,CACZ,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,UAAAC,EACA,MAAAC,EACA,SAAAC,CACD,EAAGP,EACJ,MAAO;AAAA;AAAA,4CAE+BE,CAAa;AAAA;AAAA;AAAA,uBAGlCD,CAAY;AAAA,uBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,qDAK0BG,CAAK;AAAA,qDACLF,CAAK;AAAA,wDACFG,CAAQ;AAAA,yDACPF,CAAS;AAAA;AAAA;AAAA,gBAIlE,CAAK,EACA,KAAK,EAAE,CACZ,CCzBA,MAAMG,EAAW,IAAIC,EAAe,gBAAiB,CACnD,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAa,SAAS,cAAc,OAAO,EAC3CC,EAAW,SAAS,cAAc,YAAY,EAC9CC,EAAU,SAAS,cAAc,gBAAgB,EAEvDF,EAAW,iBAAiB,SAAUG,CAAY,EAClDF,EAAS,iBAAiB,QAASG,CAAc,EAEjD,IAAIrB,EACJ,MAAMC,EAAW,GACjB,IAAIqB,EACAC,EACAxB,EAAe,GAInB,eAAeqB,EAAaI,EAAO,CAC/BA,EAAM,eAAc,EACpBxB,EAAO,EACTmB,EAAQ,UAAY,GAEpBpB,EADayB,EAAM,OACC,SAAS,QAAQ,MAAM,KAAI,EAC7CR,EAAO,MAAM,QAAU,eAEvB,GAAI,CACA,MAAMS,EAAW,MAAM3B,EAAWC,CAAY,EAC9CuB,EAAaG,EAAS,UACtBF,EAAaD,EAAarB,EAC1Be,EAAO,MAAM,QAAU,OAEnBS,EAAS,KAAK,OAAS,GACvBN,EAAQ,mBAAmB,YAAaf,EAAaqB,CAAQ,CAAC,EAC1DF,GAAcvB,GACdkB,EAAS,MAAM,QAAU,OACzBQ,EAAS,KAAK,CACV,QAAS,2CACT,SAAU,WACV,gBAAiB,UACjB,aAAc,MAClC,CAAiB,IAGDR,EAAS,MAAM,QAAU,QACzBJ,EAAS,QAAO,KAGpBI,EAAS,MAAM,QAAU,OACzBQ,EAAS,KAAK,CACV,QAAS,2DACT,SAAU,WACV,gBAAiB,UACjB,aAAc,MAC9B,CAAa,EAER,OAAOvB,EAAO,CACba,EAAO,MAAM,QAAU,OACvBU,EAAS,KAAK,CACZ,QAAS,GAAGvB,EAAM,OAAO,GACzB,SAAU,WACV,gBAAiB,UACjB,aAAc,MACtB,CAAO,CACF,CACL,CAEA,eAAekB,GAAiB,CAC9B,GAAI,CACFrB,IACA,MAAM2B,EAAUR,EAAQ,iBAAiB,sBAAqB,EAC9DH,EAAO,MAAM,QAAU,eACvB,MAAMS,EAAW,MAAM3B,EAAWC,EAAcC,CAAI,EACpDgB,EAAO,MAAM,QAAU,OACvBG,EAAQ,mBAAmB,YAAaf,EAAaqB,CAAQ,CAAC,EAC9DX,EAAS,QAAO,EAChB,OAAO,SAAS,CACd,IAAKa,EAAQ,OACb,SAAU,QAChB,CAAK,EAEGJ,GAAcvB,IAChBkB,EAAS,MAAM,QAAU,OACzBQ,EAAS,KAAK,CACZ,QAAS,2CACT,SAAU,WACV,gBAAiB,UACjB,aAAc,MACtB,CAAO,EAEJ,OAAQvB,EAAO,CACduB,EAAS,KAAK,CACZ,QAAS,GAAGvB,EAAM,OAAO,GACzB,SAAU,WACV,gBAAiB,UACjB,aAAc,MACpB,CAAK,CACF,CACH"}